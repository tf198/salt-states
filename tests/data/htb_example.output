#!/bin/bash
set -e

## AUTOGENERATED TC FOR eth1 - DO NOT EDIT ##
tc qdisc del dev eth1 root || true
tc qdisc add dev eth1 root handle 1: htb

# Interface limit
tc class add dev eth1 parent 1: classid 1:100 htb rate 1024kbit

# Default traffic
tc class add dev eth1 parent 1:100 classid 1:13 htb rate 768kbit ceil 1024kbit prio 2
tc qdisc add dev eth1 parent 1:13 handle 2: sfq perturb 10

# Interactive traffic
tc filter add dev eth1 parent 1: u32 match ip tos 0x10 0xff flowid 1:102
tc class add dev eth1 parent 1:100 classid 1:102 htb rate 128kbit prio 1
tc qdisc add dev eth1 parent 1:102 handle 3: sfq perturb 10

# Bulk traffic
tc filter add dev eth1 parent 1: u32 match ip tos 0x08 0xff flowid 1:103
tc class add dev eth1 parent 1:100 classid 1:103 htb rate 128kbit ceil 1024kbit prio 3
tc qdisc add dev eth1 parent 1:103 handle 4: sfq perturb 10
